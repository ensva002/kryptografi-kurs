<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel=icon type=image/svg+xml href=../favicon.svg>
    <link rel=stylesheet href=style.css>
    <link id="codeStyle" rel=stylesheet href=prism.css>
    <script type=module src=script.js></script>
    <script type=module src=prism.js></script>
    <title>3 - Animasjon Fortsettelse</title>
</head>
<body>
    <div id="canvas">
        <div id="overview"></div>
        <div id="content">
            <h1>3 - Animasjon Fortsettelse</h1>
            <p>Åpne scriptet vi la til på karakteren vår i del 2. Du kan åpne dette
ved å trykke på arket ved siden av øyet på noden.</p>
<p><img src="../media/3_Animasjon5.png" /></p>
<p>Vi ønsker å gjøre forandringer på AnimatedSprite2D, som er “child
noden” til CharacterBody2D. Vi lagrer pekeren til AnimatedSprite2D i en
variabel, slik at vi ikke trenger å hente den hver gang vi skal bruke
den. Først definerer vi variabelen som skal holde på pekeren, men ikke
gi den en verdi. Vi må være sikre på at AnimatedSprite2D noden er lastet
inn før vi kan peke til den. Dette bruker vi _ready() funksjonen for,
den venter til alt er lastet inn, så kjører den en gang. i denne
funksjonen setter vi verdien til $AnimatedSprite2D. vi bruker $ for å få
tak i en “child node”, en node som ligger under noden som scriptet
ligger i. koden din skal nå se omtrent sånn ut. De nye linjene er
markert med blått.</p>
<p><img src="../media/3_Animasjon4.png" /> <img
src="../media/3_Animasjon1.gif" /></p>
<p>Vi starter med å legge til kode for å bytte mellom hoppe og stå
animasjonene. Vi skriver koden vår under move_and_slide() funksjonen. Vi
starter med en test for å se om karakteren beveger seg vertikalt, og
dersom den gjør det spiller vi av “jump” animasjonen, om den ikke
stemmer bytter vi til “idle”</p>
<pre class="language-gdscript"><code>if velocity.y != 0:
  anim.play(&quot;jump&quot;)
else:
  anim.play(&quot;idle&quot;)</code></pre>
<p>Alt vi trenger for å legge til en løpeanimasjon her er å legge til en
elif som sjekker om vi beveger oss horisontalt.</p>
<pre class="language-gdscript"><code>if velocity.y != 0:
  anim.play(&quot;jump&quot;)
elif velocity.x != 0:
  anim.play(&quot;run&quot;)
else:
  anim.play(&quot;idle&quot;)</code></pre>
<p>ved å ha testen til løpe animasjonen etter hoppe animasjonen vil
hoppe animasjonen overstyre løpeanimasjonen, slik at vi kan bevege oss i
luften uten at karakteren løper i løse luften. Nå mangler vi bare at
karakteren snur seg. Vi kan se i inspektøren om det er en lett måte å
gjøre dette med AnimatedSprite2D.</p>
<p><img src="../media/3_Animasjon3.png" /></p>
<p>Alt vi ser i inspektøren kan vi modifisere i koden vår også, så alt
vi trenger å gjøre nå er å sjekke hvilken vei karakteren går NÅR
spilleren holder nede en knapp, og slå på Flip H om vi går til
venstre.</p>
<pre class="language-gdscript"><code>if velocity.x &lt; 0:
  anim.flip_h = true
else:
  anim.flip_h = false</code></pre>
<p>Vi kan skrive denne koden inn her:</p>
<p><img src="../media/3_Animasjon2.png" /></p>
<p>Om du ønsker at kameraet skal følge karakteren, bare legg inn
Camera2D inn i spiller scenen, og pass på at det er enabled.</p>
<p><img src="../media/3_Animasjon6.gif" /></p>
        </div>
    </div>
</body>
</html>
